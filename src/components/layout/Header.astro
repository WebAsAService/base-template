---
// Header component for the landing page

// Props for customization
interface Props {
  // Logo image path (optional)
  logo?: string;
  // Background color for the header (optional)
  bgColor?: string;
  // Text color for the links (optional)
  textColor?: string;
  // Hover color for the links (optional)
  hoverColor?: string;
  // Whether to show the fonts link (optional)
  showFontsLink?: boolean;
}

// Default values for props
const {
  logo = "",
  bgColor = "bg-white/90",
  textColor = "text-gray-700",
  hoverColor = "text-primary-500",
  showFontsLink = true,
} = Astro.props;
---

<header
  class={`sticky top-0 z-50 w-full ${bgColor} backdrop-blur-sm shadow-sm`}
>
  <div class="container mx-auto px-4 py-4 flex justify-between items-center">
    <!-- Logo -->
    <div class="flex items-center">
      <a href="#top" class="flex items-center">
        {
          logo ? (
            <img src={logo} alt="Logo" class="h-8" />
          ) : (
            <span class="text-2xl font-bold">Brand</span>
          )
        }
      </a>
    </div>

    <!-- Navigation -->
    <nav class="hidden md:flex space-x-8">
      <a
        href="#top"
        class={`${textColor} hover:${hoverColor} transition-colors`}>Home</a
      >
      <a
        href="#what-we-fix"
        class={`${textColor} hover:${hoverColor} transition-colors`}>Problems</a
      >

      <!-- What We Offer dropdown -->
      <div class="relative group">
        <a
          href="#services"
          class={`${textColor} hover:${hoverColor} transition-colors flex items-center`}
        >
          Solutions
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4 ml-1"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"></path>
          </svg>
        </a>
        <div
          class="absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50"
        >
          <a
            href="#services"
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
            >Services</a
          >
          <a
            href="#competitors"
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
            >Comparison</a
          >
          <a
            href="#pricing"
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
            >Pricing</a
          >
          <a
            href="#tools"
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
            >Tools</a
          >
        </div>
      </div>

      <!-- Who We Are dropdown -->
      <div class="relative group">
        <a
          href="#value-comparison"
          class={`${textColor} hover:${hoverColor} transition-colors flex items-center`}
        >
          About
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4 ml-1"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"></path>
          </svg>
        </a>
        <div
          class="absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50"
        >
          <a
            href="#value-comparison"
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
            >Why Us</a
          >
          <a
            href="#partners"
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
            >Partners</a
          >
          <a
            href="#faq"
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
            >FAQ</a
          >
        </div>
      </div>

      <a
        href="#contact"
        class={`${textColor} hover:${hoverColor} transition-colors`}>Contact</a
      >
      {
        showFontsLink && (
          <a
            href="/font-demo"
            class={`${textColor} hover:${hoverColor} transition-colors`}
          >
            Fonts
          </a>
        )
      }
    </nav>

    <!-- CTA Button -->
    <div class="hidden md:block">
      <a href="#pricing" class="btn btn-primary bg-secondary-500">Get Started</a
      >
    </div>

    <!-- Mobile Menu Button -->
    <button
      id="mobile-menu-button"
      class="md:hidden text-gray-700 focus:outline-none"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-6 w-6"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div
    id="mobile-menu"
    class={`hidden md:hidden ${bgColor.replace("/90", "")} w-full border-t`}
  >
    <div class="container mx-auto px-4 py-3 flex flex-col space-y-3">
      <a
        href="#top"
        class={`${textColor} hover:${hoverColor} py-2 transition-colors`}
        >Home</a
      >
      <a
        href="#what-we-fix"
        class={`${textColor} hover:${hoverColor} py-2 transition-colors`}
        >Problems</a
      >

      <!-- Solutions Section -->
      <div class="py-2">
        <div class={`${textColor} font-medium`}>Solutions</div>
        <div class="pl-4 mt-1 flex flex-col space-y-2">
          <a
            href="#services"
            class={`${textColor} hover:${hoverColor} py-1 transition-colors text-sm`}
            >Services</a
          >
          <a
            href="#competitors"
            class={`${textColor} hover:${hoverColor} py-1 transition-colors text-sm`}
            >Comparison</a
          >
          <a
            href="#pricing"
            class={`${textColor} hover:${hoverColor} py-1 transition-colors text-sm`}
            >Pricing</a
          >
          <a
            href="#tools"
            class={`${textColor} hover:${hoverColor} py-1 transition-colors text-sm`}
            >Tools</a
          >
        </div>
      </div>

      <!-- About Section -->
      <div class="py-2">
        <div class={`${textColor} font-medium`}>About</div>
        <div class="pl-4 mt-1 flex flex-col space-y-2">
          <a
            href="#value-comparison"
            class={`${textColor} hover:${hoverColor} py-1 transition-colors text-sm`}
            >Why Us</a
          >
          <a
            href="#partners"
            class={`${textColor} hover:${hoverColor} py-1 transition-colors text-sm`}
            >Partners</a
          >
          <a
            href="#faq"
            class={`${textColor} hover:${hoverColor} py-1 transition-colors text-sm`}
            >FAQ</a
          >
        </div>
      </div>

      <a
        href="#contact"
        class={`${textColor} hover:${hoverColor} py-2 transition-colors`}
        >Contact</a
      >
      {
        showFontsLink && (
          <a
            href="/font-demo"
            class={`${textColor} hover:${hoverColor} py-2 transition-colors`}
          >
            Fonts
          </a>
        )
      }
      <a href="#pricing" class="btn btn-secondary w-full text-center"
        >Get Started</a
      >
    </div>
  </div>
</header>

<script>
  // Mobile menu toggle and smooth scrolling
  document.addEventListener("DOMContentLoaded", () => {
    // Mobile menu toggle
    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const mobileMenu = document.getElementById("mobile-menu");

    if (mobileMenuButton && mobileMenu) {
      mobileMenuButton.addEventListener("click", () => {
        mobileMenu.classList.toggle("hidden");
      });
    }

    // Smooth scrolling for all anchor links
    document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
      anchor.addEventListener(
        "click",
        function (this: HTMLAnchorElement, e: Event) {
          e.preventDefault();

          // Close mobile menu if open
          if (mobileMenu && !mobileMenu.classList.contains("hidden")) {
            mobileMenu.classList.add("hidden");
          }

          // Handle special case for #top
          const href = this.getAttribute("href");
          if (href === "#top") {
            window.scrollTo({
              top: 0,
              behavior: "smooth",
            });
            return;
          }

          // For all other anchor links
          const targetId = href || "";
          const targetElement = document.querySelector(targetId);

          if (targetElement) {
            targetElement.scrollIntoView({
              behavior: "smooth",
              block: "start",
            });

            // Update URL without page reload
            history.pushState({}, "", targetId);
          }
        },
      );
    });
  });
</script>
